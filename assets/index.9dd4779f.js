import{p as z,h as B,g as Z,M as F,D as j,a as P,G as V,T as J,C as U,b as Q,c as ee,B as te,V as x,m as H,d as oe,e as E,f as ae,i as ne,S as M,j as _}from"./vendor.ebf7d406.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}};re();const se="FeatureCollection",ie=[{type:"Feature",properties:{name:"contracts",polygonType:"hexed"},geometry:{type:"Polygon",coordinates:[[[-83.41581653394655,22.093693413959883],[-69.0414177493357,29.780563979262446],[-55.87005304002173,41.61583678222764],[-38.93912145883206,41.21075621778293],[-23.478052475277366,34.54699929369645],[-21.279102565567456,24.691027618019916],[-10.72381081590298,22.543349601943802],[-6.379806247277614,13.51275841061377],[-21.721887424356837,11.489539120932974],[-35.66753267535792,13.88076508606008],[-51.88564572911747,13.012063343090418],[-63.33697056083935,17.46656808106144],[-80.44693279649161,15.576727605273376],[-83.41581653394655,22.093693413959883]]]}},{type:"Feature",properties:{name:"usdc",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[-38.20616417999105,69.83426085052284],[-29.798639965337145,71.85991631668392],[-21.822864961097864,72.38382901319204],[-18.484153117754104,70.68879148454893],[-20.486382338739332,68.64193231423741],[-32.61631046819507,68.96963506790932],[-38.20616417999105,69.83426085052284]]]}},{type:"Feature",properties:{name:"usdt",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[-45.71287912905643,70.4168649639687],[-42.801433685792716,75.39268138438734],[-29.44130631553365,74.83959666865937],[-29.850068864462784,71.89246488076927],[-38.26931046013212,69.85971707492388],[-45.71287912905643,70.4168649639687]]]}},{type:"Feature",properties:{name:"sushi",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[24.254218749796365,27.909198149814372],[29.24180329095001,31.136414016222083],[31.31083020232117,30.742561435715885],[34.275530645849756,30.554749944898546],[36.90887296250832,28.18179592078817],[36.68465376789104,25.206872054582703],[28.5338075078149,23.687924989561182],[23.25961343562156,25.01634551250244],[24.254218749796365,27.909198149814372]]]}},{type:"Feature",properties:{name:"uniswap_v2",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[29.23640854343548,31.133529223379966],[27.458597027535944,33.903384826882984],[28.958915569408624,36.21894397671942],[31.341609139370362,36.39578340735812],[34.37887913690766,36.17351660152313],[35.703334453569624,34.526547720712784],[35.52158820951197,32.31098716691473],[34.19580758774413,30.553804371055215],[31.26902357009854,30.75064414711666],[29.23640854343548,31.133529223379966]]]}},{type:"Feature",properties:{name:"uniswap_v3",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[14.818693264621785,31.506249554860872],[21.794370038735224,35.72468253494521],[27.442957752237483,33.902746698211025],[29.212685502790883,31.15596290334549],[24.28206515011452,27.957330134692242],[17.66742776584124,28.519865593206283],[14.818693264621785,31.506249554860872]]]}},{type:"Feature",properties:{name:"crypto.com",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[70.46201168890639,-28.48660142595658],[54.361103631509735,-28.850844647688547],[45.78278500438293,-32.56662667897517],[37.393595813484446,-31.255202231958506],[42.96359440213982,-21.588707621563557],[47.26078508299047,-12.082911785042015],[53.076393531618805,1.4450784349632357],[57.77218974702812,7.318345846447187],[63.70298291377545,6.375158194859907],[68.28666339378628,5.83328666799332],[71.1867693907508,-.5977744154302371],[75.73272266983513,-6.107570622157326],[70.28682370978929,-8.682483969787398],[71.8312897947637,-12.784046753147024],[73.00536223893108,-19.861334923114853],[71.2555007209638,-26.577548450351443],[70.46201168890639,-28.48660142595658]]]}},{type:"Feature",properties:{name:"ftx",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[77.7062935320113,-4.759624854585596],[90.66102374976717,-4.02635253476555],[100.91384906687604,5.999576009225649],[102.2222137947512,4.940857404157029],[111.15035441601712,.5326631232847063],[119.36685117651132,-2.8286945017639624],[132.46611065742752,-2.1651764932388176],[133.07389731839356,-19.657324217560102],[121.95975672863081,-30.016513009368367],[102.32101233338315,-32.3415342868108],[89.01610477994487,-23.326239805655817],[79.87423433972475,-15.372472060183128],[70.2950335052717,-8.685716797378447],[75.70537318312617,-6.160553367522766],[77.7062935320113,-4.759624854585596]]]}},{type:"Feature",properties:{name:"binance",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[90.07235960100397,15.331062575310085],[91.76025444718198,16.981173579462407],[97.12156702386139,23.774696971883216],[109.01785684224602,26.25587678350559],[115.68467300500464,22.59215383279036],[121.17155108140611,15.30070420244661],[128.96937497445566,12.184061581696],[134.71414847993353,10.09763593165576],[133.57149857916573,4.777427604687716],[132.43031684106978,-1.984962249768543],[119.27728564339104,-2.680997309888923],[111.12647985251593,.5965320466120261],[102.16587801293724,4.97317708090624],[90.07235960100397,15.331062575310085]]]}},{type:"Feature",properties:{name:"gemini",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[79.0135364297332,11.726542933717852],[65.81950762804115,18.297913979062457],[69.36540257157412,28.80700845909621],[79.00791912861379,40.020958872051935],[92.00860392974504,39.05939991487883],[106.54662397888418,32.88808063191281],[97.08083685511174,23.78490687413185],[91.76670566568703,16.966859680406486],[79.0135364297332,11.726542933717852]]]}},{type:"Feature",properties:{name:"coinbase",polygonType:"full"},geometry:{type:"Polygon",coordinates:[[[71.16260864812608,-.5014488626779041],[68.30017587521489,5.850032864053929],[79.10371259277518,11.94438649169922],[90.07239651269369,15.337320757928353],[100.85207949761788,6.055105218831244],[90.52060399521453,-3.9863884476539226],[77.74169094765062,-4.7503706410282405],[71.16260864812608,-.5014488626779041]]]}},{type:"Feature",properties:{name:"private_addresses",polygonType:"hexed"},geometry:{type:"Polygon",coordinates:[[[-151.62468723778306,70.33997078614672],[-97.86293790440794,74.47493656252409],[-89.25959487920983,64.03487034304702],[-65.40684295998727,52.72182511378066],[-79.93877815976234,41.41067740638432],[-105.02187502652757,29.062954142792478],[-118.34633434841822,35.07641774970799],[-131.17609054966422,25.21575227359341],[-133.31837436761185,8.32477424740955],[-135.3511688313283,-11.650017516837934],[-154.06949781174137,-22.359854897591205],[-173.14732598103092,-19.57032089622095],[-177.226570106838,-6.282278482883797],[-175.0194320616439,15.451955811433379],[-176.17613996053058,51.691939499081826],[-167.23897165606746,67.71906533193447],[-151.62468723778306,70.33997078614672]]]}},{type:"Feature",properties:{name:"tokens",polygonType:"hexed"},geometry:{type:"Polygon",coordinates:[[[69.82368201354555,47.98723186003956],[42.92898986949069,44.175644376002154],[19.27560667456595,44.588714760198116],[9.883753207920194,52.91553628591608],[18.03934740726801,68.12513541094312],[110.12163008902417,81.97810739200025],[158.35528406460548,72.61104400272303],[161.6147201704095,56.424732492046935],[145.43462203820803,48.5276554960918],[147.94252955014076,34.441309540841026],[134.67174307640295,31.782187762245208],[114.11666931277486,39.50957150840773],[99.04986922957778,44.09004302125717],[87.812269750457,57.01819607820577],[69.82368201354555,47.98723186003956]]]}},{type:"Feature",properties:{name:"opensea",polygonType:"hexed"},geometry:{type:"Polygon",coordinates:[[[-80.89760896288885,-42.40038656304009],[-95.65181268843207,-56.73672268194318],[-120.8818223928049,-60.56098752469066],[-144.71569884686141,-55.627316312861154],[-136.63705747508763,-37.83695437855593],[-120.76928774569325,-25.58148828389392],[-109.65996271895798,-14.740920140806523],[-92.99032798202973,-20.742855029208783],[-74.514857610381,-26.910844817152352],[-60.53503273627669,-34.34042038380403],[-64.66208234039112,-45.20520082357638],[-80.89760896288885,-42.40038656304009]]]}}];var f={type:se,features:ie};function le(e){let t=e.length,a;for(;t!=0;)a=Math.floor(Math.random()*t),t--,[e[t],e[a]]=[e[a],e[t]];return e}let S=2,ce=[],de=z(f.features[0].geometry.coordinates,S,!0);de.forEach(e=>ce.push(B(e)));let T={};for(var v=0;v<f.features.length;v++){let e=[];z(f.features[v].geometry.coordinates,S,!0).forEach(a=>e.push(B(a))),f.features[v].center_coordinates=e,T[f.features[v].properties.name]=le(e)}window.regionCenterPoints=T;var N=document.createElement("div");N.id="globeViz";document.body.appendChild(N);let q=100;var c={rotate:!0,trxns_per_sec:15,showVisualizations:!0,pauseAnimation:!1,emitArcs:!0,emitPillars:!0,emitParticles:!0,arcs:{arc_rel_len:2}};const $=15e3;async function X(){let e=pe(c.trxns_per_sec*$/1e3),t=ue(e);c.showVisualizations&&me(t),await new Promise(a=>setTimeout(a,c.showVisualizations?$:500)),await X()}const b=[[30,"private_addresses","private_addresses"],[30,"private_addresses","contracts"],[20,"private_addresses","tokens"],[5,"private_addresses","opensea"],[3,"private_addresses","usdt"],[2,"private_addresses","usdc"],[5,"private_addresses","coinbase"],[5,"private_addresses","binance"]];let R=[];b.forEach((e,t)=>{var a=Array(b[t][0]).fill(t);R.push(...a)});function pe(e){let t=[];for(var a=0;a<e;a++){const n=R[~~(Math.random()*R.length)];let s=b[n][1],i=b[n][2],l=["tokens","opensea"];var r;s!=i&&!l.includes(i)?r="arc":l.includes(i)?r="pillar":r="particle",t.push({fromAddr:s,toAddr:i,viz_type:r})}return t}function ue(e){for(var t=0;t<e.length;t++){let n=e[t],s=T[n.fromAddr],i=T[n.toAddr];var a,r;n.fromAddr==n.toAddr?(a=Math.floor(Math.random()*(s.length-1)),r=a+1):(a=Math.floor(Math.random()*s.length),r=Math.floor(Math.random()*i.length)),n.startLat=s[a][0],n.startLng=s[a][1],n.endLat=i[r][0],n.endLng=i[r][1]}return e}function me(e){e.forEach(t=>{t.viz_type=="arc"&&c.emitArcs?xe(t):t.viz_type=="particle"&&c.emitParticles?Ee(t):t.viz_type=="pillar"&&c.emitPillars?Fe(t):["pillar","particle","arc"].includes(t.viz_type)||console.log(`Unrecognized viz type ${t.viz_type}`)})}X();function ge(e,t,a,r){var n=6371,s=A(a-e),i=A(r-t),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(A(e))*Math.cos(A(a))*Math.sin(i/2)*Math.sin(i/2),d=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),y=n*d;return y}function A(e){return e*(Math.PI/180)}function I(e){return new Promise(t=>setTimeout(t,e))}const G=1500,ye=3,fe=3,he=1,we=.03,o=new Z()(document.getElementById("globeViz")).onGlobeReady(Ge).showAtmosphere(!1).showGlobe(!0).arcColor(()=>"darkOrange").arcDashLength(c.arcs.arc_rel_len).arcDashGap(2).arcStroke(.5).arcDashInitialGap(1).arcDashAnimateTime(G).arcsTransitionDuration(0).arcLabel(e=>`Hello this is a long sentence about arc: ${e.startLat}`).pointResolution(6).pointRadius(.75).pointsTransitionDuration(1e3).pointAltitude(e=>e.altitude).hexPolygonsData(f.features).hexPolygonResolution(S).hexPolygonMargin(.1).hexPolygonLabel(e=>e.properties.name).polygonAltitude(.005).polygonCapMaterial(new F({color:"yellow",side:j})).polygonLabel(e=>e.properties.name).polygonSideColor(()=>"rgba(0,0,0,0)").polygonCapCurvatureResolution(0).ringColor(()=>e=>`rgba(255,100,50,${1-e})`).ringMaxRadius(fe).ringPropagationSpeed(he).ringRepeatPeriod(G*c.arcs.arc_rel_len/ye).customThreeObject(e=>{if(e.type=="eth")return Te();if(e.type=="pillar_w_coin"){let t=_e(),a=Me(e);const r=new V;return r.add(t),r.add(a),r}}).customThreeObjectUpdate((e,t)=>{t._needsFirstUpdate&&(De(e,t),t._needsFirstUpdate=!1)}).onCustomLayerHover((e,t)=>{e!=null?(o.controls().autoRotate==!0&&(o.controls().autoRotate=!1,e.pausedGlobe=!0),e.tweens.forEach(r=>r.pause())):(t.tweens.forEach(r=>r.resume()),t.pausedGlobe==!0&&(o.controls().autoRotate=!0,t.pausedGlobe=!1))}).onCustomLayerClick((e,t)=>{console.log("Clicked!"),console.log(e)});o.controls().autoRotate=!1;o.controls().autoRotateSpeed=.4;function K(){o.pointOfView({lat:38.0143,lng:-96.72028,altitude:2},1e3)}K();var Pe=new J,ve="https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/",Le=["0x3b484b82567a09e2588A13D54D032153f0c0aEe0","0x0198f46f520F33cd4329bd4bE380a25a90536CD5","0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE","0x0000000000095413afC295d19EDeb1Ad7B71c952"];let O=[];Le.forEach(e=>O.push(Pe.load(`${ve}/${e}/logo.png`)));function Me(e){let t=6,a=new U(e.pillarRadius,e.pillarRadius,e.pillarHeight,t);return a.rotateX(Math.PI/2),new P(a,new F({color:"#3c3c3d",transparent:!1,opacity:.7}))}let h=2;function _e(){let e=.1*h,t=25;const a=new U(h,h,e,t,1),r=new Q({color:"#C0C0C0",transparent:!1,opacity:.9,metalness:.9}),n=new P(a,r),s=new ee(h,t),i=new F({map:O[Math.floor(Math.random()*O.length)]}),l=new P(s,i),d=new P(s,i),y=.1;l.position.y+=e/2+y,l.rotateX(-1*Math.PI/2),l.rotateY(Math.PI*2),d.position.y-=e/2+y,d.rotateX(Math.PI/2),d.rotateZ(Math.PI);const m=new V;return m.add(n),m.add(l),m.add(d),m}function Te(e){let t=r([[0,1,1],[0,-1,0],[2,0,0],[0,4,0],[-2,0,0]]),a=r([[0,-1.125,.5],[0,-3,0],[2,0,0],[0,-1,0],[-2,0,0]]);function r(y){let m=new te().setFromPoints(y.map(D=>new x(D[0],D[1],D[2]))),W=[0,1,2,0,2,3,0,3,4,0,4,1];return m.setIndex(W),m.computeVertexNormals(),m}a.translate(0,-.5,0);let n=H([t,a]),s=n.clone();s.rotateY(Math.PI);let i=H([n,s]);i=i.toNonIndexed(),i.computeVertexNormals();let l=new oe({color:"#37367b",specular:328965,shininess:100,transparent:!1,opacity:.95}),d=new P(i,l);return d.scale.set(.8,.8,.8),d}function be(e,t){let a=new _.Tween(t).to({lat:t.endLat,lng:t.endLng},t.flightTime).onUpdate(()=>{e.rotateY(.005);let d=o.getCoords(t.lat,t.lng,t.alt);Object.assign(e.position,d)}).start();var r=e.quaternion.clone();let n=o.getCoords(t.endLat,t.endLng,t.alt);e.position.set(n.x,n.y,n.z),e.lookAt(o.scene().localToWorld(new x(0,0,0))),e.rotateX(Math.PI*1.5);var s=e.quaternion.clone();e.quaternion.copy(r);let i=new _.Tween(e.quaternion).to(s,1e3),l=new _.Tween(t).to({alt:-.05},1500).onStart(()=>{}).onUpdate(()=>{e.rotateY(.03);let d=o.getCoords(t.lat,t.lng,t.alt);Object.assign(e.position,d)}).onComplete(()=>{o.customLayerData(o.customLayerData().filter(d=>d!==t))});t.tweens=[a,i,l],a.chain(i),i.chain(l)}function Ae(e){let t=.25,a=.75,r=0;return e<=a?r=Math.min(e/t,1):r=1-Math.min((e-a)/(1-a),1),r}function Ce(e,t){let a=e.children[0],r=e.children[1],n=o.getCoords(t.lat,t.lng,0);function s(l){Object.assign(l.position,n),l.lookAt(o.scene().localToWorld(new x(0,0,0)))}let i=new _.Tween(t).to({pillarHeightScaleFactor:1,coinAlt:t.maxCoinAlt},t.timeToLive).easing(Ae).onStart(()=>{s(r),s(a)}).onUpdate(()=>{r.scale.set(1,1,t.pillarHeightScaleFactor);let l=o.getCoords(t.lat,t.lng,t.coinAlt);Object.assign(a.position,l),a.rotateZ(.02)}).onComplete(()=>{o.customLayerData(o.customLayerData().filter(l=>l!==t))}).start();t.tweens=[i]}function De(e,t){t.type=="eth"?be(e,t):t.type=="pillar_w_coin"?Ce(e,t):console.log(`firstUpdateCustomThreeObj not implemented for ${t.type}`)}async function Fe(e,t=!1){t||await I(Math.random()*1e3*15),e.timeToLive=1e4,e.type="pillar_w_coin",e.pillarRadius=1.75,e.pillarHeightScaleFactor=.001,e.pillarHeight=20+Math.random()*20,e.lat=e.endLat,e.lng=e.endLng,e.coinAlt=h/q+.01,e.maxCoinAlt=(e.pillarHeight/2+h)/q+.01,e._needsFirstUpdate=!0,o.customLayerData([...o.customLayerData(),e])}async function xe(e){await I(Math.random()*1e3*15),o.arcsData([...o.arcsData(),e]),setTimeout(()=>o.arcsData(o.arcsData().filter(t=>t!==e)),G*3)}async function Ee(e){await I(Math.random()*1e3*15),e.type="eth",e.lat=e.startLat,e.lng=e.startLng,e.flightTime=5e3/3867*ge(e.startLat,e.startLng,e.endLat,e.endLng),e.alt=we,e._needsFirstUpdate=!0,o.customLayerData([...o.customLayerData(),e])}const Se=o.scene();Se.background=new E(265505);const w=o.globeMaterial();w.color=new E("#4849c5");w.emissive=new E(2228280);w.emissiveIntensity=.1;w.shininess=.7;o.controls().enablePan=!0;o.controls().maxPolarAngle=Math.PI;o.controls().enableDamping=!0;o.controls().enableKeys=!0;const g=new ae(16777215,1);g.name="my_light_obj";g.position.set(-270,200,-53);function Re(){o.camera().add(g),o.scene().add(o.camera())}function Ie(){let e=o.scene().children.find(t=>t.type=="DirectionalLight");e&&(o.scene().remove(e),defaultLightingRemoved=!0)}function Ge(){Ie(),Re()}var p=new ne;p.add(o.controls(),"autoRotate").name("Auto rotate").listen();p.add(o.controls(),"autoRotateSpeed",0,10).name("Rotate speed").listen();p.add(c,"showVisualizations").name("Show Viz").listen();var Oe={resetPointOfView:function(){K()}};p.add(Oe,"resetPointOfView");p.add(c,"emitArcs").name("Show Arcs").listen();p.add(c,"emitPillars").name("Show Pillars").listen();p.add(c,"emitParticles").name("Show Particles").listen();p.add(c,"pauseAnimation").name("Pause Animation").onFinishChange(()=>{c.pauseAnimation?o.pauseAnimation():o.resumeAnimation()});p.add(c,"trxns_per_sec",1,100).step(1).name("Trxns Per Sec").listen();var C=p.addFolder("Camera");C.add(o.camera().position,"y",-350,350).listen();C.add(o.camera().position,"x",-350,350).listen();C.add(o.camera().position,"z",0,500).listen();C.close();var L=p.addFolder("Direction Light");L.add(g.position,"y",-350,350).listen();L.add(g.position,"x",-350,350).listen();L.add(g.position,"z",-350,350).listen();L.add(g,"intensity",0,2).listen();L.close();var k=p.addFolder("Globe Material");k.add(w,"emissiveIntensity",0,1).listen();k.add(w,"shininess",0,100).listen();k.close();p.open();var u=new M;u.showPanel(0);var ke=u.addPanel(new M.Panel("Arcs","#ff8","#221")),ze=u.addPanel(new M.Panel("Particles","#ff8","#221")),Be=u.addPanel(new M.Panel("Pillars","#ff8","#221"));document.body.appendChild(u.dom);Array.from(u.dom.children).forEach(e=>e.style.display="block");Array.from(u.dom.children).forEach(e=>e.style.width="160px");Array.from(u.dom.children).forEach(e=>e.style.height="60px");function Y(){u.begin(),o.customLayerData(o.customLayerData()),u.end(),ke.update(o.arcsData().length,460),ze.update(o.customLayerData().filter(e=>e.type=="eth").length,460),Be.update(o.customLayerData().filter(e=>e.type=="pillar_w_coin").length,460),requestAnimationFrame(Y)}Y();window.globe=o;window.props=c;window.stats=u;window.gui=p;window.showStats=()=>{u.dom.style.display="block"};window.hideStats=()=>{u.dom.style.display="none"};
